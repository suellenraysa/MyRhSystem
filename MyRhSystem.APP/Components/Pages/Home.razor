@page "/company/list"

<div class="page-gradient py-5">
    <div class="container-narrow">
        <div class="header-icon text-center mb-3">
            <i class="bi bi-buildings"></i>
        </div>
        <h2 class="text-center mb-1">Selecione uma Empresa</h2>
        <p class="text-center text-muted mb-4">Escolha qual empresa você deseja gerenciar</p>

        <div class="search-wrap mb-3">
            <input class="form-control search-input" placeholder="Buscar por nome da empresa, setor…" @bind="Search" />
        </div>

        <div class="list-stack">
            @foreach (var c in Filtered)
            {
                var isSelected = Selected?.Name == c.Name;
                <div class="company-item @(isSelected ? "selected" : null)" @onclick="() => Select(c)">
                    <div class="item-left">
                        <div class="item-icon">
                            <i class="bi bi-building"></i>
                        </div>
                        <div class="item-body">
                            <div class="item-title">
                                <span class="name">@c.Name</span>
                                <span class="badge sector">@c.Sector</span>
                            </div>
                            <div class="item-sub">
                                <span class="sub"><i class="bi bi-people me-1"></i>@c.EmployeeRange</span>
                                <span class="dot">•</span>
                                <span class="sub"><i class="bi bi-geo-alt me-1"></i>@c.City, @c.State</span>
                                @if (!string.IsNullOrWhiteSpace(c.Website))
                                {
                                    <span class="dot">•</span>
                                    <a class="sub link" href="@c.Website" target="_blank"><i class="bi bi-globe me-1"></i>@c.WebsiteHost</a>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="item-right">
                        <i class="bi bi-chevron-right"></i>
                    </div>
                </div>
            }

            <!-- Cadastrar Nova Empresa -->
            <div class="add-new dashed" role="button" @onclick="GoToCreate">
                <i class="bi bi-plus-circle"></i>
                <span>Cadastrar Nova Empresa</span>
            </div>
        </div>

        @if (Selected is not null)
        {
            <div class="selection-panel mt-3">
                <div class="selected-info">
                    <strong>Empresa Selecionada</strong>
                    <div class="text-muted">@Selected!.Name</div>
                </div>
                <div class="actions">
                    <button class="btn btn-outline-secondary" @onclick="Cancel">Cancelar</button>
                    <button class="btn btn-success" @onclick="Gerenciar">Gerenciar Empresa</button>
                </div>
            </div>
        }
    </div>
</div>
